general:
  branches:
    ignore:
      - gh-pages

test:
  override:
    - exit 0

deployment:
  production:
    branch: master
    commands:
      - npm install -g elm@0.18.0
      - npm install -g firebase-tools@3.2.0
      - mv $(npm config get prefix)/bin/elm-make $(npm config get prefix)/bin/elm-make-old
      - echo "#\!/bin/bash\\n\\necho \"Running elm-make with sysconfcpus -n 2\"\\n\\n$TRAVIS_BUILD_DIR/sysconfcpus/bin/sysconfcpus -n 2 elm-make-old \"\$@\"" > $(npm config get prefix)/bin/elm-make
      - chmod +x $(npm config get prefix)/bin/elm-make
      - npm run build
      - firebase deploy --token=$FIREBASE_TOKEN --non-interactive